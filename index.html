<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="css/design.css" type="text/css"/>
    <link href='https://fonts.googleapis.com/css?family=Actor' rel='stylesheet'/>
    <link href='https://fonts.googleapis.com/css?family=Amatic SC' rel='stylesheet'/>
    <link rel='icon' href='images/favicon.ico'/>
    <title>Maria Alarms</title>
  </head>

  <script type="text/javascript">
  var countdown;
  var countdown2;
  var countdown_ex_initial;
  var countdown_rest_initial;
  var countdown_exercise;
  var countdown_rest;
  var audio = new Audio();
  audio.src = "sounds/alarm.mp3";

  var done = false;
  var count = 0;
  var i = 0;

  function countdown_trigger() {

      if (countdown_exercise > 0 && count === 0) {
          countdown_exercise--;
          document.getElementById('countdown_text').innerHTML = countdown_exercise;
          if (countdown_exercise > 0) { countdown = setTimeout(countdown_trigger, 1000); }
          if (countdown_exercise === 0) {
            audio.play();
            console.log("termina ejercicio");
            document.getElementById('countdown_text').innerHTML = 'Ejercicio';
            done = true;
          }
        }
      if (countdown_rest > 0 && done === true && count === 0) {
          countdown_rest--;
          document.getElementById('descanso').innerHTML = countdown_rest;
          if (countdown_rest > 0) { countdown2 = setTimeout(countdown_trigger, 1000); }
          if (countdown_rest === 0) {
            audio.play();
            console.log("termina descanso");
            document.getElementById('descanso').innerHTML = 'Descanso';
            done = false;
            count++;
            countdown_exercise = countdown_ex_initial;
            countdown_rest = countdown_rest_initial;
          }
        }


        if (countdown_exercise > 0 && count === 1) {
            countdown_exercise--;
            document.getElementById('countdown_text').innerHTML = countdown_exercise;
            if (countdown_exercise > 0) { countdown = setTimeout(countdown_trigger, 1000); }
            if (countdown_exercise === 0) {
              audio.play();
              console.log("termina ejercicio");
              document.getElementById('countdown_text').innerHTML = 'Ejercicio';
              done = true;
            }
          }
        if (countdown_rest > 0 && done === true && count === 1) {
            countdown_rest--;
            document.getElementById('descanso').innerHTML = countdown_rest;
            if (countdown_rest > 0) { countdown2 = setTimeout(countdown_trigger, 1000); }
            if (countdown_rest === 0) {
              audio.play();
              console.log("termina descanso");
              document.getElementById('descanso').innerHTML = 'Descanso';
              done = false;
              count++;
              countdown_exercise = countdown_ex_initial;
              countdown_rest = countdown_rest_initial;
            }
          }


        if (countdown_exercise > 0 && count === 2) {
            countdown_exercise--;
            document.getElementById('countdown_text').innerHTML = countdown_exercise;
            if (countdown_exercise > 0) { countdown = setTimeout(countdown_trigger, 1000); }
            if (countdown_exercise === 0) {
              audio.play();
              console.log("termina ejercicio");
              document.getElementById('countdown_text').innerHTML = 'Ejercicio';
              done = true;
            }
          }
        if (countdown_rest > 0 && done === true && count === 2) {
            countdown_rest--;
            document.getElementById('descanso').innerHTML = countdown_rest;
            if (countdown_rest > 0) { countdown2 = setTimeout(countdown_trigger, 1000); }
            if (countdown_rest === 0) {
              audio.play();
              console.log("termina descanso");
              document.getElementById('descanso').innerHTML = 'Descanso';
              done = false;
              count++;
              countdown_exercise = countdown_ex_initial;
              countdown_rest = countdown_rest_initial;
            }
          }


        if (countdown_exercise > 0 && count === 3) {
            countdown_exercise--;
            document.getElementById('countdown_text').innerHTML = countdown_exercise;
            if (countdown_exercise > 0) { countdown = setTimeout(countdown_trigger, 1000); }
            if (countdown_exercise === 0) {
              audio.play();
              console.log("termina ejercicio");
              document.getElementById('countdown_text').innerHTML = 'Ejercicio';
              done = true;
            }
          }
        if (countdown_rest > 0 && done === true && count === 3) {
            countdown_rest--;
            document.getElementById('descanso').innerHTML = countdown_rest;
            if (countdown_rest > 0) { countdown2 = setTimeout(countdown_trigger, 1000); }
            if (countdown_rest === 0) {
              audio.play();
              console.log("termina descanso");
              document.getElementById('descanso').innerHTML = 'Descanso';
              done = false;
              count++;
              countdown_exercise = countdown_ex_initial;
              countdown_rest = countdown_rest_initial;
            }
          }

        if (countdown_exercise > 0 && count === 4) {
            countdown_exercise--;
            document.getElementById('countdown_text').innerHTML = countdown_exercise;
            if (countdown_exercise > 0) { countdown = setTimeout(countdown_trigger, 1000); }
            if (countdown_exercise === 0) {
              audio.play();
              console.log("termina ejercicio");
              document.getElementById('countdown_text').innerHTML = 'Ejercicio';
              done = true;
            }
          }
        if (countdown_rest > 0 && done === true && count === 4) {
            countdown_rest--;
            document.getElementById('descanso').innerHTML = countdown_rest;
            if (countdown_rest > 0) { countdown2 = setTimeout(countdown_trigger, 1000); }
            if (countdown_rest === 0) {
              audio.play();
              console.log("termina descanso");
              document.getElementById('descanso').innerHTML = 'Descanso';
              done = false;
              count++;
              countdown_exercise = countdown_ex_initial;
              countdown_rest = countdown_rest_initial;
            }
          }
        if (countdown_exercise > 0 && count === 5) {
            countdown_exercise--;
            document.getElementById('countdown_text').innerHTML = countdown_exercise;
            if (countdown_exercise > 0) { countdown = setTimeout(countdown_trigger, 1000); }
            if (countdown_exercise === 0) {
              audio.play();
              console.log("termina ejercicio");
              document.getElementById('countdown_text').innerHTML = 'Ejercicio';
              done = true;
            }
          }
        if (countdown_rest > 0 && done === true && count === 5) {
            countdown_rest--;
            document.getElementById('descanso').innerHTML = countdown_rest;
            if (countdown_rest > 0) { countdown2 = setTimeout(countdown_trigger, 1000); }
            if (countdown_rest === 0) {
              audio.play();
              console.log("termina descanso");
              document.getElementById('descanso').innerHTML = 'Descanso';
              done = false;
              count++;
              countdown_exercise = countdown_ex_initial;
              countdown_rest = countdown_rest_initial;
            }
          }

  }

  function countdown_clear() {
    clearTimeout(countdown);
    clearTimeout(countdown2);
    document.getElementById('countdown_text').innerHTML = 'Ejercicio';
    document.getElementById('descanso').innerHTML = 'Descanso';

  }

  function countdown_init() {
      countdown_ex_initial = document.getElementById('ex_amount').value;
      countdown_rest_initial = document.getElementById('rest_amount').value;
      countdown_exercise = countdown_ex_initial;
      countdown_rest = countdown_rest_initial;
      countdown_trigger();
  }

  </script>

  <body>

    <div class="grid-container">
      <div class="item1" onmousedown="audio.play()">Maria's Timer</div>

      <div class="item6">
            <label>Tiempo de ejercicio</label> <br>
            <input type="text" id="ex_amount">
      </div>

      <div class="item7">
            <label>Tiempo de descanso</label> <br>
            <input type="text" id="rest_amount">
      </div>

      <div class="item2" onmousedown="countdown_init()">Start</div>
      <div class="item3" onmousedown="countdown_clear()">Stop</div>
      <div class="item4" id="countdown_text">Ejercicio</div>
      <div class="item5" id="descanso">Descanso</div>

    </div>



  </body>
</html>
